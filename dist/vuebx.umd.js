!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue"),require("lodash")):"function"==typeof define&&define.amd?define(["vue","lodash"],e):(n=n||self).vuebx=e(n.Vue,n.lodash)}(this,function(n,e){"use strict";return n=n&&n.hasOwnProperty("default")?n.default:n,function(){var t=n.observable(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return[function(n){return function(e){var t,r={};return(t=e,Array.isArray(t)?t.map(function(n){return{key:n,val:n}}):Object.keys(t).map(function(n){return{key:n,val:t[n]}})).forEach(function(e){var t=e.key,o=e.val;r[t]=function(){if(!(o in n))throw Error("unknown state: "+o);return n[o]}}),r}}(t),function(t){return function(r){if("function"==typeof r){var o=e.cloneDeep(t);r=r.call(null,o)}return Object.keys(r).forEach(function(n){if(!(n in t))throw Error("unknown state: "+n);t[n]=r[n]}),new Promise(function(e){n.nextTick(function(){e()})})}}(t)]}});
